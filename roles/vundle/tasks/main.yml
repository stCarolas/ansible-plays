- name: Has local Vundle
  tags: vim
  git:
    repo: https://github.com/VundleVim/Vundle.vim.git
    dest: ~/.vim/bundle/Vundle.vim

- name: Has configured vimrc for Vundle, part1  
  tags: vim
  blockinfile: 
    create: yes
    dest: ~/.config/vim/plugins
    marker: '"{mark} vundle start block'
    content: |
        set nocompatible
        filetype off
        set rtp+=~/.vim/bundle/Vundle.vim
        call vundle#begin()
        Plugin 'VundleVim/Vundle.vim'

- name: Has configured vimrc for Vundle, part2  
  tags: vim
  blockinfile: 
    dest: ~/.config/vim/plugins
    marker: '"{mark} vundle end block'
    content: |
        call vundle#end()
        filetype plugin indent on

- name: Has installed plugins
  tags: vim
  notify: install plugins
  lineinfile:
    insertafter: 'END vundle start block'
    line: Plugin '{{ item }}'
    dest: ~/.config/vim/plugins
    state: present
    regexp: Plugin '{{ item }}' 
  with_items:
    - easymotion/vim-easymotion
    - majutsushi/tagbar
    - scrooloose/nerdcommenter
    - bkad/CamelCaseMotion
    - artur-shaik/vim-javacomplete2
    - airblade/vim-rooter
    - scrooloose/nerdtree
    - jistr/vim-nerdtree-tabs
    - jiangmiao/auto-pairs
    - vim-syntastic/syntastic
    - itchyny/lightline.vim

- name: Has NERDTree configured
  tags: vim
  blockinfile  :
    dest       : ~/.config/vim/nerdtree
    create     : yes
    marker    : '"{mark} settings for NERDTree'
    content    : |
        map <silent> <leader>n :NERDTreeTabsToggle<cr>
        map <silent> <leader>N :NERDTreeFind<cr>

- name: Has TagBar configured
  tags: vim
  blockinfile  :
    dest       : ~/.config/vim/tagbar
    create     : yes
    marker    : '"{mark} settings for TagBar'
    content    : |
        nnoremap <leader>t :TagbarToggle<cr>
        nnoremap <leader>T :TagbarOpen<cr><c-w><right>/

- name: Has Vim-Rooter configured
  tags: vim
  blockinfile : 
    create    : yes
    dest      : ~/.config/vim/vim-rooter
    marker    : '"{mark} settings for vim-rooter'
    content   : |
        let g:rooter_patterns = ['.git/']
        let g:rooter_silent_chdir = 0
